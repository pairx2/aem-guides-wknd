$(document).on('ready', function () {
    calcSimilacGender();
});

let calcSimilacGender = function () {
    let genderPredictionChart = {
        jan: {
            18: "G",
            19: "B",
            20: "G",
            21: "B",
            22: "G",
            23: "B",
            24: "B",
            25: "G",
            26: "B",
            27: "G",
            28: "B",
            29: "G",
            30: "B",
            31: "B",
            32: "B",
            33: "G",
            34: "B",
            35: "B",
            36: "G",
            37: "B",
            38: "G",
            39: "B",
            40: "G",
            41: "B",
            42: "G",
            43: "B",
            44: "B",
            45: "G"
        },
        feb: {
            18: "B",
            19: "G",
            20: "B",
            21: "G",
            22: "B",
            23: "B",
            24: "G",
            25: "B",
            26: "G",
            27: "B",
            28: "G",
            29: "B",
            30: "G",
            31: "G",
            32: "G",
            33: "B",
            34: "G",
            35: "B",
            36: "B",
            37: "G",
            38: "B",
            39: "G",
            40: "B",
            41: "G",
            42: "B",
            43: "G",
            44: "B",
            45: "B"
        },
        mar: {
            18: "G",
            19: "B",
            20: "G",
            21: "G",
            22: "B",
            23: "G",
            24: "B",
            25: "B",
            26: "B",
            27: "G",
            28: "B",
            29: "G",
            30: "G",
            31: "B",
            32: "B",
            33: "B",
            34: "B",
            35: "G",
            36: "B",
            37: "B",
            38: "B",
            39: "B",
            40: "G",
            41: "B",
            42: "G",
            43: "B",
            44: "G",
            45: "B"
        },
        apr: {
            18: "B",
            19: "G",
            20: "B",
            21: "G",
            22: "G",
            23: "B",
            24: "B",
            25: "G",
            26: "G",
            27: "B",
            28: "G",
            29: "G",
            30: "G",
            31: "G",
            32: "G",
            33: "B",
            34: "G",
            35: "B",
            36: "G",
            37: "B",
            38: "B",
            39: "B",
            40: "B",
            41: "G",
            42: "B",
            43: "G",
            44: "B",
            45: "G"
        },
        may: {
            18: "B",
            19: "G",
            20: "B",
            21: "G",
            22: "B",
            23: "B",
            24: "G",
            25: "G",
            26: "G",
            27: "G",
            28: "G",
            29: "B",
            30: "G",
            31: "G",
            32: "G",
            33: "G",
            34: "G",
            35: "G",
            36: "B",
            37: "G",
            38: "B",
            39: "B",
            40: "G",
            41: "B",
            42: "G",
            43: "B",
            44: "B",
            45: "G"
        },
        jun: {
            18: "B",
            19: "B",
            20: "B",
            21: "G",
            22: "G",
            23: "G",
            24: "B",
            25: "B",
            26: "B",
            27: "G",
            28: "G",
            29: "B",
            30: "G",
            31: "G",
            32: "G",
            33: "G",
            34: "B",
            35: "G",
            36: "G",
            37: "B",
            38: "G",
            39: "G",
            40: "B",
            41: "G",
            42: "B",
            43: "G",
            44: "B",
            45: "G"
        },
        jul: {
            18: "B",
            19: "B",
            20: "B",
            21: "G",
            22: "G",
            23: "B",
            24: "B",
            25: "G",
            26: "G",
            27: "B",
            28: "B",
            29: "B",
            30: "G",
            31: "G",
            32: "G",
            33: "G",
            34: "G",
            35: "G",
            36: "G",
            37: "G",
            38: "B",
            39: "G",
            40: "B",
            41: "B",
            42: "G",
            43: "B",
            44: "G",
            45: "B"
        },
        aug: {
            18: "B",
            19: "B",
            20: "B",
            21: "G",
            22: "B",
            23: "G",
            24: "G",
            25: "B",
            26: "B",
            27: "B",
            28: "B",
            29: "B",
            30: "G",
            31: "G",
            32: "G",
            33: "B",
            34: "G",
            35: "B",
            36: "G",
            37: "B",
            38: "G",
            39: "B",
            40: "G",
            41: "B",
            42: "B",
            43: "G",
            44: "B",
            45: "G"
        },
        sep: {
            18: "B",
            19: "B",
            20: "B",
            21: "G",
            22: "G",
            23: "B",
            24: "G",
            25: "B",
            26: "G",
            27: "B",
            28: "B",
            29: "B",
            30: "G",
            31: "G",
            32: "G",
            33: "G",
            34: "G",
            35: "G",
            36: "B",
            37: "G",
            38: "B",
            39: "G",
            40: "B",
            41: "G",
            42: "B",
            43: "B",
            44: "G",
            45: "B"
        },
        oct: {
            18: "B",
            19: "B",
            20: "G",
            21: "G",
            22: "G",
            23: "B",
            24: "G",
            25: "B",
            26: "G",
            27: "B",
            28: "B",
            29: "G",
            30: "G",
            31: "G",
            32: "G",
            33: "G",
            34: "G",
            35: "G",
            36: "B",
            37: "B",
            38: "G",
            39: "B",
            40: "G",
            41: "B",
            42: "G",
            43: "B",
            44: "B",
            45: "G"
        },
        nov: {
            18: "B",
            19: "G",
            20: "B",
            21: "G",
            22: "G",
            23: "B",
            24: "G",
            25: "B",
            26: "G",
            27: "G",
            28: "G",
            29: "G",
            30: "B",
            31: "G",
            32: "G",
            33: "G",
            34: "B",
            35: "B",
            36: "B",
            37: "G",
            38: "B",
            39: "G",
            40: "B",
            41: "G",
            42: "B",
            43: "B",
            44: "G",
            45: "B"
        },
        dec: {
            18: "B",
            19: "G",
            20: "B",
            21: "G",
            22: "G",
            23: "G",
            24: "G",
            25: "B",
            26: "G",
            27: "B",
            28: "G",
            29: "G",
            30: "B",
            31: "B",
            32: "B",
            33: "B",
            34: "B",
            35: "B",
            36: "B",
            37: "B",
            38: "B",
            39: "G",
            40: "G",
            41: "B",
            42: "G",
            43: "B",
            44: "G",
            45: "B"
        }
    };

    $('#section-calculator-nina').addClass('d-none');
    $('#section-calculator-nino').addClass('d-none');
    let monthNames = [];
    $('#calciSimilacMonth-options .a-dropdown__menu li').each(function (index) {
        if (index != 0) {
            monthNames[index - 1] = $(this).text().trim();
        }
    })
    
    let defaultMonthValue = $('#calciSimilacMonth-options .a-dropdown__placeholder').text().trim();
    let defaultAgeValue = $('#calciSimilacAge-options .a-dropdown__placeholder').text().trim();
    let momLunarAge ;
   function checkingmomLunar(month,age){
    if (month == 'apr' || month == 'may' || month == 'jun' || month == 'jul' || month == 'aug' || month == 'sep' || month == 'oct') {
        momLunarAge = age + 1;
    } else {
        momLunarAge = age + 2;
    }
   }
    $(document).on("click", '.button #gender-prediction-calc-btn', function (event) {
        event.preventDefault();
        $('#gender-prediction-calc .a-input-field--text-require').css('display', 'none');
        $('#section-calculator-nina').addClass('d-none');
        $('#section-calculator-nino').addClass('d-none');
        let age = ($('#calciSimilacAge-options .a-dropdown-selected').text().trim() == defaultAgeValue) ? null : $('#calciSimilacAge-options .a-dropdown-selected').text().trim();
        let monthSequence = ($('#calciSimilacMonth-options .a-dropdown-selected').text().trim() == defaultMonthValue) ? null : monthNames.indexOf($('#calciSimilacMonth-options .a-dropdown-selected').text().trim());
        let month = Object.keys(genderPredictionChart)[monthSequence];
    
        let prediction;
        if (month && age) {
            age = parseInt(age);
           checkingmomLunar(month,age);
            prediction = genderPredictionChart[month][momLunarAge];
            prediction == 'B' ? $('#section-calculator-nino').removeClass('d-none') : $('#section-calculator-nina').removeClass('d-none');
        } else if (month || age) {
            if(!month) {
				$('#calciSimilacMonth-options .a-input-field--text-require').css('display', 'block');
            }
            else {
				$('#calciSimilacAge-options .a-input-field--text-require').css('display', 'block');
        	}
        }
        else {
            $('#gender-prediction-calc .a-input-field--text-require').css('display', 'block');
        } 
    });
};
