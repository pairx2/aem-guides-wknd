<sly data-sly-use.embed="com.abbott.aem.ardx.division.core.components.models.Embed"
     data-sly-use.component="com.adobe.cq.wcm.core.components.models.Component">
    <div data-sly-use.template="core/wcm/components/commons/v1/templates.html">
        <sly data-sly-test="${embed.type == 'marketo' || embed.type == 'actonforms' || embed.type == 'externalFrame' }">
            <sly data-sly-test="${embed.type == 'actonforms'}">
                ${embed.actonScript @ context='unsafe'}
            </sly>
            <sly data-sly-test="${embed.type == 'marketo'}">
                <sly data-sly-test.editMode="${wcmmode.edit}">
                    <p class="text-uppercase">Marketo Form Id: ${embed.marketoFormId}</p>
                    <p class="text-uppercase">Marketo Munchkin Id: ${embed.marketoMunchkinId}</p>
                    <p class="text-uppercase">Success Message: ${embed.successMessage @ context='html'}</p>
                </sly>
                <sly data-sly-test="${!editMode}">
                    <div id="marketo-form" class="js-marketo-container"
                         data-form-id="${embed.marketoFormId}"
                         data-munchkin-id="${embed.marketoMunchkinId}">
                        <form id="mktoForm_${embed.marketoFormId}"></form>
                    </div>
                    <span class="d-none js-success-message">${embed.successMessage @ context='html'}</span>
                </sly>
            </sly>
            <sly data-sly-test="${embed.type == 'externalFrame'}">
                <div class="frame-container" id="${!wcmmode.edit ? component.id : ''}"
                     data-sly-test="${embed.linktoExternalPage}">
                    <iframe src="${(wcmmode.edit || wcmmode.preview || !(embed.lazyLoading || embed.appendParameter)) ? embed.linktoExternalPage : ''}"
                            width="${embed.width @ context = 'attribute'}"
                            height="${embed.height @ context = 'attribute'}"
                            allow="${embed.allowGeoLocation ? 'geolocation' : ''}"
                            class="${(wcmmode.edit || !embed.lazyLoading) ? '' : 'lazy'}"
                            loading="${(wcmmode.edit || !embed.lazyLoading) ? 'auto' : 'lazy'}"
                            data-load-rules="{'scrollToTop':${embed.scrollToTop},'appendParameters':${embed.appendParameter}}"
                            title="${embed.title @ context = 'attribute'}">
                    </iframe>
                </div>
            </sly>
        </sly>
        <sly data-sly-test="${!(embed.type == 'marketo' || embed.type == 'actonforms' || embed.type == 'externalFrame')}"
             data-sly-include="embed.html"></sly>
    </div>
</sly>
<sly data-sly-call="${template.placeholder @ isEmpty=!embed.title}"></sly>